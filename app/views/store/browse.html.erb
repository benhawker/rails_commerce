<%= render_breadcrumbs :builder => ::BootstrapBreadcrumbsBuilder %>

<h1><%= @presenter.category.name %></h1>
<div class="row">

	<% if @presenter.product_attributes.any? || @presenter.brands.any? %>
		<div class="col-md-2">			
			<ul class="nav nav-pills nav-stacked">	
				<li><%= t('store.brand') %></li>	  
				<% @presenter.brands.group_by(&:name).map { |k,v| [v.first, v.length] }.each do |brand_group| %>
					<li class="<%= "active" if brand_filter_active?(brand_group[0]) %>">
						<%= brand_filter_link brand_group[0], category_id: @presenter.category.id, count: brand_group[1] %>
					</li>
				<% end %>
			</ul>
			
			<% @presenter.product_attributes.each do |product_attribute| %>
				<ul class="nav nav-pills nav-stacked">		  
					<%= product_attribute.name %>
					<% product_attribute.product_attribute_values.group_by(&:value).map { |k,v| [v.first, v.length] }.each do |attribute_value_group| %>
						<% unless attribute_value_group[0].blank? %>						
							<li class="<%= "active" if attribute_filter_active?(attribute_value_group[0]) %>">
								<%= attribute_filter_link attribute_value_group[0], 
														  count: attribute_value_group[1], 
														  category_id: @presenter.category.id %>
							</li>												
						<% end %>					
					<% end %>
				</ul>
			<% end %>
		</div>	
		<div class="col-md-9">
			<%= render 'products_grid', products: @presenter.products %>
		</div>
	<% else %>
		<%= render 'products_grid', products: @presenter.products %>
	<% end %>
</div>

